language: node_js
sudo: false
node_js:
  - 6.4
# NodeJS v4 requires gcc 4.8
env:
  - NODE_ENV=travis CXX="g++-4.8" CC="gcc-4.8"

#matrix:
  #allow_failures:
    #- node_js: 5

#services:
  #- mongodb
# gcc 4.8 requires ubuntu-toolchain-r-test

addons:
  apt:
    sources:
    - ubuntu-toolchain-r-test
    packages:
    - g++-4.8
    - gcc-4.8
    - clang

notifications:
  webhooks:
    urls:
      secure: "ggSylJcCHSS99KSoZUu60AvpLtcXtKRnyWuAoSpjLkI97Opg3WZzQQwSYB1Vzw0GAprvx6QdznwIVpR0EPm18mW4czR7zMrkiSfCZj2CwZEy72S6i/G628V1aJONsB8+j/TYncKFqMKIm7WefvGvQ9J7v6UaBBrvSA0DVQdnEJaG7r8lErBbWpwDc+w2f9+QMTXmq0gZjK04w9aSk4y6TUAfU4k0tBYzpCUliS1LeJ38qjz6f2S8J+dlO+FMwk49Uat6967PDV9850rzFDOyxClW4KDoIdILTATHHsWf8CnLKASqBYD73C++6P2zGZxbnnF+0mI+zehvvkGNOMsJ4j9xggyYYHlBksapyTXOTi/sb/PZXzwf2/nQ+IP7qqbZq2gV3o3Xa1WL6cffJNlEZ2EfliEb9sRRnQpFbjCGCqvckqeGlV+RZ31UjzvTKrvvYPmTaItHfLnP/m+V0DwS+gS6e7LUvaBeT1zAswnoDw6UJj9IuHPBuq/it3rNjiM1kWHEnZRih7MZ0+oLxZ2rRIjWC5LrF1vEGApWALPKWlNP/MA7UTizcqVlOpUm1f+7WwPyF0RVOJC9vMKhIETbQBuRhHY41Ph42uaYPszM68vRf2f/z5ibPcebiaoU0PYGzUakctPp5qrPosel/fsEIakxog/O4iRYZkCeylHkLnk="
    on_success: change  # options: [always|never|change] default: always
    on_failure: always  # options: [always|never|change] default: always
    on_start: never     # options: [always|never|change] default: always


before_install:
  - npm i nsp -g
  - npm install gulpjs/gulp-cli -g

after_script:
  - nsp audit-package
  - npm run coverage
